# libpmg
A small C++ library for procedurally generated 2D dungeon maps

## Info
This is a small C++ library, that can produce procedurally generated 2D dungeon maps. All maps are std::vectors of Tile objects. Every Tile object has a 2D location, and a list of Tag object. The user can extend the Tag class in order to assign a Tag to a Tile.

First a 2D map is generated. Then some rooms are dug. Then those rooms get connected through corridors, generated using a combination of Dijkstra, Astar and BFS algorithms, selectable by the user.

## Dependencies
- Boost (tested with 1.65.1)

## Compile
```bash
cd libpmg/bin
cmake ..
make
```

## Example

Code:
```cpp
#include "libpmg.hpp"

using namespace libpmg;

int main(int argc, char **argv) {
    // Initialize the random manager
    libpmg::RndManager::seed_ = std::rand();
    
    // Initialize the builder
    DungeonBuilder builder;
    
    // Setup the map
    builder.SetMapSize(100, 45);
    builder.SetMinRoomSize(4, 4);
    builder.SetMaxRoomSize(12, 12);
    builder.SetMaxRoomPlacementAttempts(10);
    builder.SetMaxRooms(10);
    builder.SetDefaultPathAlgorithm(PathAlgorithm::ASTAR_BFS_MIX);
    builder.SetDiagonalCorridors(false);
    
    // Initialize the map
    builder.InitMap();
    
    // Generate the features
    builder.GenerateRooms();
    builder.GenerateCorridors();
    builder.GenerateDoors();
    builder.GenerateWallStairs(1, 1);
    builder.GenerateGroundStairs(1, 1, true, false);
    
    // Build the map
    std::shared_ptr<Map> map {builder.Build()};
    
    // Print a sample
    map->Print();
    
    return 0;
}

```
Output:
```bash
Room: X:77, Y:3, width:10, height:12
Room: X:38, Y:9, width:11, height:6
Room: X:10, Y:34, width:8, height:5
Room: X:69, Y:20, width:7, height:11
Room: X:85, Y:36, width:7, height:7
Room: X:23, Y:1, width:7, height:6
Room: X:30, Y:19, width:8, height:8
Room: X:14, Y:2, width:4, height:11
Room: X:10, Y:16, width:12, height:7
Room: X:64, Y:5, width:9, height:10
Map:: 
############..........##############################################################################
############.########.+.......######################################################################
############.#....#####.......######################################################################
############.#....#####.......+.............................................+...........############
############.#....#####.......###############################################...........############
############.#....#####.......##################################.........####...........############
############.#....+...#.......##################################.........####...........############
############.#....###.#########...........######################.........####<..........############
############.#....#.............#########+######################.........####...........############
############.#....#.#.################...........###############.........####...........############
############.#....#.#.............####...........###############.........####...........############
############.#....#.#############.####...........###############.........####...........############
######.......#....#.#############.####...........+.............+.........+..+...........############
######.#########+##.#############.####...........###############.........####...........############
######.#............#############.####...........###############.........####...........############
######.#.#######+################.#######>##########################+##################+############
######.#.#............###########.#################################..##################.############
######.#.#............###########.#################################.###################.############
######.#.#............###########+#################################.###################.############
######.#.#............########........#############################.###################.############
######.#.#............########........#############################.#.......###########.############
######.#.#............########........#############################.#.......###########.############
####.....+............########........#############################.#.......###########.############
####.#.#.###..........+......+........+.............................+.......###########.############
####.#.#.....#################........#.###########################.#.......+...........############
####.#.####..#################........#.###########################.#.......##########..############
####.#.####..#################........#.###########################.#.......##########..############
####.#.####..##########################.###########################.#.......##########..############
####.#.####..########################...###########################.#.......##########..############
####.#.####..########################.#############################.#.......##########..############
####.#.####..########################.#############################.#.......##########..############
####.#.####..########################.#############################.######<###########..############
####.#.#.....########################.#############################..#################..############
####.#.#.###+########################.##############################.#################..############
####.#.#.#........###################.##############################.#################..############
####.#.#.#........###################.##############################.#################..############
####.#.#.#........###################.##############################.################.......########
####.#.#.+........###################.##############################.################.......########
####.#.###........###################.##############################.################.......########
####.#...############################.##############################.################.......########
####.###..............................#..............................################.......########
####...################################.#############################################.>.....########
######..................................#############################################.......########
####################################################################################################
####################################################################################################
```
